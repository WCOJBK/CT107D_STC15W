#### 蓝桥杯单片机第二课

1. 复习上一节课，以及位运算

   * 注意事项
     * STC15F or STC15W
       * 如果是W，IO初始化→P0M0
     * 内存
   * 位运算

2. 进行数码管点亮测试

   ​

3. 讲一下一些额外的事情

   * 有关于程序
     * 慢慢用对的程序去替换出错的程序，找到错的地方
   * 单片机封装
     * 15与51的封装区别

4. 有关于C/H文件

   * 结构化——C/H，.H放声明，.C文件放具体的实现

   * .h里面的变量要加extern，表示这个变量在其他C文件存在 

     * 头文件放什么?
       * 头文件
       * 宏定义
       * 函数声明
       * 外部变量声明
     * 头文件如何防止冲突？
       * ifndef来防止冲突

   * 怎么去写一个结构化的程序？

     * 新建工程
     * 写stc_config.h （放冲突，头文件，数据类型宏定义，板子的宏定）
     * 写main.c（加入stc_config.h头文件，以及主函数）
     * 写其他的模块
       * C文件一开始就要加入stc_config.h头文件
       * H文件（放冲突，以及对外公开的函数和变量）
     * 在工程中加入模块的c文件

     ​

5. 有关于按键

   * IO的性质（先记结论，再讲原理（弱上拉））
     * 传统的51单片机，以及默认配置下的所有51单片机
       * 开机，所有IO口都是高电平的状态，并且，如果把他拉到地（按键连接到地），松开后，他会自动回到高电平，反之则不可以（给他赋值低电平，用按键拉到高电平，他就会一直处在高电平，不会回到低电平）。
   * 按键的基本原理
   * 代码编写
     * 创建.C.H，增加最基础的防重复定义
     * 在.C写一个扫描按键函数，返回一个键值，若没有按键则返回0xff，并且在头文件中添加函数。
     * 声明计数和标志变量，利用定时器让键盘10ms扫描一次
   * 矩阵键盘的基本原理
     * 行列式
       * 先让高位或者低位为0，另外一者为1，然后检测是哪一行
       * 再反过来做一遍，检测是哪一列，然后得到结果



### 作业

1.每天两天，把今天三个代码敲一边。

2.（提高）把群里的官方矩阵键盘 ，理解一遍。
